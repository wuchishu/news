<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Python Google æ–°èçˆ¬èŸ²æ•™å­¸</title>
    <style>
        :root {
            --primary-color: #4285f4; /* Google è— */
            --secondary-color: #34a853; /* Google ç¶  */
            --accent-color: #ea4335; /* Google ç´… */
            --light-color: #f8f9fa;
            --dark-color: #202124;
            --code-bg: #f5f5f5;
            --gray-color: #5f6368;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Noto Sans TC', 'å¾®è»Ÿæ­£é»‘é«”', sans-serif;
            line-height: 1.6;
            color: var(--dark-color);
            background-color: var(--light-color);
            padding-top: 60px; /* ç‚ºå›ºå®šå°èˆªæ¬„ç•™å‡ºç©ºé–“ */
        }
        
        .navbar {
            background-color: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            height: 60px;
        }
        
        .logo {
            display: flex;
            align-items: center;
            text-decoration: none;
            color: var(--dark-color);
            font-weight: bold;
        }
        
        .logo img {
            height: 40px;
            margin-right: 10px;
        }
        
        .nav-links {
            list-style: none;
            display: flex;
        }
        
        .nav-links li {
            margin-left: 20px;
        }
        
        .nav-links a {
            text-decoration: none;
            color: var(--gray-color);
            font-weight: 500;
            transition: color 0.3s;
        }
        
        .nav-links a:hover {
            color: var(--primary-color);
        }
        
        .nav-links a.active {
            color: var(--primary-color);
            font-weight: bold;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 60px 20px;
            background: linear-gradient(135deg, var(--primary-color), #8ab4f8);
            color: white;
            margin-bottom: 40px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        header h1 {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }
        
        header p {
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .btn {
            display: inline-block;
            background-color: var(--secondary-color);
            color: white;
            padding: 12px 30px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: bold;
            margin-top: 20px;
            transition: background-color 0.3s;
        }
        
        .btn:hover {
            background-color: #2d9348;
        }
        
        h2 {
            font-size: 2rem;
            margin: 50px 0 20px;
            color: var(--primary-color);
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 10px;
        }
        
        h3 {
            font-size: 1.5rem;
            margin: 30px 0 15px;
            color: var(--dark-color);
        }
        
        h4 {
            font-size: 1.2rem;
            margin: 20px 0 10px;
            color: var(--gray-color);
        }
        
        p {
            margin-bottom: 20px;
        }
        
        a {
            color: var(--primary-color);
            text-decoration: none;
        }
        
        a:hover {
            text-decoration: underline;
        }
        
        code {
            font-family: 'Consolas', 'Monaco', monospace;
            background-color: var(--code-bg);
            padding: 2px 5px;
            border-radius: 3px;
            font-size: 0.9em;
        }
        
        pre {
            background-color: var(--code-bg);
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            line-height: 1.4;
            margin: 20px 0;
            border-left: 4px solid var(--primary-color);
        }
        
        pre code {
            background-color: transparent;
            padding: 0;
        }
        
        .alert {
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .alert-info {
            background-color: #e8f0fe;
            border-left: 4px solid var(--primary-color);
        }
        
        .alert-warning {
            background-color: #fef7e0;
            border-left: 4px solid #fbbc04;
        }
        
        .alert-success {
            background-color: #e6f4ea;
            border-left: 4px solid var(--secondary-color);
        }
        
        .steps {
            counter-reset: step;
            list-style-type: none;
            margin: 20px 0;
        }
        
        .steps li {
            position: relative;
            padding-left: 35px;
            margin-bottom: 20px;
        }
        
        .steps li:before {
            content: counter(step);
            counter-increment: step;
            position: absolute;
            left: 0;
            top: 0;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background-color: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        .card {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .card-title {
            color: var(--primary-color);
            font-size: 1.3rem;
            margin-bottom: 15px;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        table th, table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        
        table th {
            background-color: #f1f3f4;
            font-weight: bold;
            color: var(--dark-color);
        }
        
        table tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        
        .code-explanation {
            display: flex;
            flex-wrap: wrap;
            margin: 20px 0;
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .code-block {
            flex: 1;
            min-width: 300px;
            max-width: 100%;
            padding: 20px;
            background-color: var(--code-bg);
            border-right: 1px solid #ddd;
        }
        
        .explanation {
            flex: 1;
            min-width: 300px;
            padding: 20px;
            background-color: white;
        }
        
        .screenshot {
            max-width: 100%;
            border-radius: 8px;
            margin: 20px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .flex-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin: 20px 0;
        }
        
        .flex-item {
            flex: 1;
            min-width: 300px;
        }
        
        footer {
            background-color: var(--dark-color);
            color: white;
            text-align: center;
            padding: 30px 0;
            margin-top: 50px;
        }
        
        footer p {
            margin: 5px 0;
        }
        
        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: var(--gray-color);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 5px 10px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .copy-btn:hover {
            background-color: var(--primary-color);
        }
        
        .code-container {
            position: relative;
        }
        
        @media (max-width: 768px) {
            .navbar {
                padding: 0 10px;
            }
            
            .logo span {
                display: none;
            }
            
            .nav-links li {
                margin-left: 10px;
            }
            
            header {
                padding: 40px 15px;
            }
            
            header h1 {
                font-size: 2rem;
            }
            
            .container {
                padding: 15px;
            }
            
            h2 {
                font-size: 1.7rem;
            }
            
            h3 {
                font-size: 1.3rem;
            }
            
            .code-block, .explanation {
                min-width: 100%;
            }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <a href="#" class="logo">
            <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0OCA0OCI+PHBhdGggZmlsbD0iIzQyODVGNCIgZD0iTTYgNmgyMHYyMEg2eiIvPjxwYXRoIGZpbGw9IiMzNEE4NTMiIGQ9Ik0zMiA2aDEwdjEwSDMyeiIvPjxwYXRoIGZpbGw9IiNGQkJDMDQiIGQ9Ik0zMiAyMmgxMHYyMEgzMnoiLz48cGF0aCBmaWxsPSIjRUE0MzM1IiBkPSJNNiAzMmgxMHYxMEg2eiIvPjxwYXRoIGZpbGw9IiNDNTIyMUYiIGQ9Ik0yMiAzMmgxMHYxMEgyMnoiLz48L3N2Zz4=" alt="Logo">
            <span>Python çˆ¬èŸ²æ•™å­¸</span>
        </a>
        <ul class="nav-links">
            <li><a href="#intro" class="active">ä»‹ç´¹</a></li>
            <li><a href="#prerequisites">æº–å‚™å·¥ä½œ</a></li>
            <li><a href="#code">ç¨‹å¼ç¢¼</a></li>
            <li><a href="#tutorial">æ•™å­¸</a></li>
            <li><a href="#advanced">é€²éšæŠ€å·§</a></li>
        </ul>
    </nav>

    <div class="container">
        <header>
            <h1>Python Google æ–°èçˆ¬èŸ²æ•™å­¸</h1>
            <p>å­¸ç¿’å¦‚ä½•ä½¿ç”¨ Pythonã€BeautifulSoup å’Œ Gradio å»ºç«‹ä¸€å€‹ç°¡å–®ä½†åŠŸèƒ½å¼·å¤§çš„ Google æ–°èçˆ¬èŸ²æ‡‰ç”¨</p>
            <a href="#code" class="btn">æŸ¥çœ‹å®Œæ•´ç¨‹å¼ç¢¼</a>
        </header>

        <section id="intro">
            <h2>ä»‹ç´¹</h2>
            <p>é€™å€‹å°ˆæ¡ˆå°‡æ•™ä½ å¦‚ä½•ä½¿ç”¨ Python é–‹ç™¼ä¸€å€‹ Google æ–°èçˆ¬èŸ²å·¥å…·ï¼Œå®ƒå¯ä»¥ï¼š</p>
            <ul>
                <li>æ ¹æ“šé—œéµå­—æœå°‹ Google æ–°è</li>
                <li>æå–æ–°èæ¨™é¡Œã€ä¾†æºã€æ‘˜è¦å’Œé€£çµ</li>
                <li>ç”Ÿæˆæ–‡å­—é›²è¦–è¦ºåŒ–</li>
                <li>å°‡çµæœä¿å­˜ç‚º Markdown å’Œ CSV æ ¼å¼</li>
                <li>é€é Gradio ç•Œé¢è®“ä½¿ç”¨è€…è¼•é¬†æ“ä½œ</li>
            </ul>
            
            <div class="alert alert-info">
                <p><strong>ğŸ’¡ å­¸ç¿’é‡é»</strong></p>
                <p>é€šéé€™å€‹å°ˆæ¡ˆï¼Œä½ å°‡å­¸åˆ°ï¼š</p>
                <ul>
                    <li>å¦‚ä½•ä½¿ç”¨ requests ç™¼é€ HTTP è«‹æ±‚</li>
                    <li>å¦‚ä½•ä½¿ç”¨ BeautifulSoup è§£æ HTML</li>
                    <li>å¦‚ä½•ä½¿ç”¨ WordCloud ç”Ÿæˆæ–‡å­—é›²</li>
                    <li>å¦‚ä½•ä½¿ç”¨ Gradio å‰µå»ºç°¡å–®çš„ç¶²é ç•Œé¢</li>
                    <li>å¦‚ä½•è™•ç†çˆ¬èŸ²éç¨‹ä¸­çš„å¸¸è¦‹éŒ¯èª¤</li>
                </ul>
            </div>
        </section>

        <section id="prerequisites">
            <h2>æº–å‚™å·¥ä½œ</h2>
            
            <h3>æ‰€éœ€å·¥å…·</h3>
            <ul>
                <li>Python 3.7 æˆ–æ›´é«˜ç‰ˆæœ¬</li>
                <li>æ–‡å­—ç·¨è¼¯å™¨æˆ– IDEï¼ˆæ¨è–¦ä½¿ç”¨ Visual Studio Codeã€PyCharmï¼‰</li>
            </ul>
            
            <h3>å®‰è£å¿…è¦çš„å¥—ä»¶</h3>
            <p>åœ¨é–‹å§‹ä¹‹å‰ï¼Œä½ éœ€è¦å®‰è£ä»¥ä¸‹ Python å¥—ä»¶ï¼š</p>
            <div class="code-container">
                <button class="copy-btn" onclick="copyCode('pip-code')">è¤‡è£½</button>
                <pre><code id="pip-code">pip install requests beautifulsoup4 wordcloud matplotlib gradio</code></pre>
            </div>
            
            <div class="card">
                <h3 class="card-title">å¥—ä»¶èªªæ˜</h3>
                <table>
                    <tr>
                        <th>å¥—ä»¶åç¨±</th>
                        <th>ç”¨é€”</th>
                    </tr>
                    <tr>
                        <td>requests</td>
                        <td>ç”¨æ–¼ç™¼é€ HTTP è«‹æ±‚ï¼Œç²å–ç¶²é å…§å®¹</td>
                    </tr>
                    <tr>
                        <td>beautifulsoup4</td>
                        <td>ç”¨æ–¼è§£æ HTML ä¸¦æå–æ‰€éœ€è³‡è¨Š</td>
                    </tr>
                    <tr>
                        <td>wordcloud</td>
                        <td>ç”¨æ–¼ç”Ÿæˆæ–‡å­—é›²è¦–è¦ºåŒ–</td>
                    </tr>
                    <tr>
                        <td>matplotlib</td>
                        <td>ç”¨æ–¼ç¹ªåœ–ï¼Œwordcloud ä¾è³´æ­¤å¥—ä»¶</td>
                    </tr>
                    <tr>
                        <td>gradio</td>
                        <td>ç”¨æ–¼å‰µå»ºç°¡å–®çš„ Web ç•Œé¢</td>
                    </tr>
                </table>
            </div>
            
            <div class="alert alert-warning">
                <p><strong>âš ï¸ æ³¨æ„</strong></p>
                <p>å¦‚æœä½¿ç”¨ç¹é«”ä¸­æ–‡ç”Ÿæˆæ–‡å­—é›²ï¼Œæ‚¨éœ€è¦å®‰è£é©ç•¶çš„å­—é«”æ–‡ä»¶ã€‚åœ¨ Windows ç³»çµ±ä¸­ï¼Œå¯ä»¥ä½¿ç”¨å¾®è»Ÿæ­£é»‘é«” (msjh.ttc)ï¼Œè©²å­—é«”æ–‡ä»¶é€šå¸¸å·²é è£åœ¨ç³»çµ±ä¸­ã€‚</p>
            </div>
        </section>

        <section id="code">
            <h2>å®Œæ•´ç¨‹å¼ç¢¼</h2>
            <p>ä»¥ä¸‹æ˜¯ Google æ–°èçˆ¬èŸ²çš„å®Œæ•´ç¨‹å¼ç¢¼ï¼š</p>
            <div class="code-container">
                <button class="copy-btn" onclick="copyCode('full-code')">è¤‡è£½</button>
                <pre><code id="full-code">import os
import csv
from pathlib import Path
from datetime import datetime
from urllib.parse import quote_plus
from collections import Counter
from bs4 import BeautifulSoup
from wordcloud import WordCloud
import matplotlib.pyplot as plt
import gradio as gr
import traceback
import requests


def generate_wordcloud(text, output_path):
    """ç”Ÿæˆæ–‡å­—é›²åœ–ç‰‡"""
    try:
        wc = WordCloud(
            font_path="msjh.ttc", width=800, height=400, background_color="white"
        ).generate(text)
        wc.to_file(output_path)
        return True
    except Exception as e:
        print(f"ç”Ÿæˆæ–‡å­—é›²æ™‚ç™¼ç”ŸéŒ¯èª¤: {e}")
        # å˜—è©¦ä½¿ç”¨ç³»çµ±é è¨­å­—é«”
        try:
            wc = WordCloud(
                width=800, height=400, background_color="white"
            ).generate(text)
            wc.to_file(output_path)
            return True
        except Exception as e2:
            print(f"ä½¿ç”¨é è¨­å­—é«”ç”Ÿæˆæ–‡å­—é›²æ™‚ç™¼ç”ŸéŒ¯èª¤: {e2}")
            return False


def extract_top_sources(articles, top_n=5):
    """æå–æœ€å¸¸è¦‹çš„æ–°èä¾†æº"""
    sources = [a["ä¾†æº"] for a in articles if a["ä¾†æº"]]
    return Counter(sources).most_common(top_n)


def crawl_google_news_with_requests(keyword="å°ç£ Google æ–°è", pages=3):
    """ä½¿ç”¨ requests å’Œ BeautifulSoup æŠ“å– Google æ–°è"""
    
    # æº–å‚™çµæœç›®éŒ„å’Œæª”æ¡ˆ
    script_dir = Path(__file__).parent
    result_dir = script_dir / "news_results"
    result_dir.mkdir(parents=True, exist_ok=True)
    timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
    md_path = result_dir / f"google_news_{timestamp}.md"
    csv_path = result_dir / f"google_news_{timestamp}.csv"
    wordcloud_path = result_dir / f"google_news_{timestamp}_wordcloud.png"
    
    # ä¿å­˜æ‰€æœ‰æ–‡ç« 
    all_articles = []
    encoded_query = quote_plus(keyword)
    
    # è¨­å®š requests çš„ headers (æ¨¡æ“¬ç€è¦½å™¨)
    headers = {
        "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36",
        "Accept-Language": "zh-TW,zh;q=0.9,en-US;q=0.8,en;q=0.7",
        "Referer": "https://www.google.com/"
    }
    
    session = requests.Session()
    session.headers.update(headers)
    
    # æŠ“å–æ¯ä¸€é 
    for page in range(pages):
        try:
            start = page * 10
            url = f"https://www.google.com/search?q={encoded_query}&tbm=nws&start={start}"
            
            response = session.get(url, timeout=10)
            response.raise_for_status()  # ç¢ºä¿è«‹æ±‚æˆåŠŸ
            
            html_content = response.text
            
            # åªä¿å­˜ç¬¬ä¸€é ä½œç‚ºåƒè€ƒ
            if page == 0:
                with open(result_dir / "raw_page_1.html", "w", encoding="utf-8") as f:
                    f.write(html_content)
            
            # ä½¿ç”¨ BeautifulSoup è§£æ HTML
            soup = BeautifulSoup(html_content, "html.parser")
            
            # æå–æ¯å€‹æ–°èé …ç›®
            for item in soup.select("div.SoaBEf"):
                try:
                    a_tag = item.find("a", href=True)
                    title_tag = item.find("div", role="heading")
                    source_tag = item.find("div", class_="MgUUmf")
                    snippet_tag = item.find("div", class_="GI74Re")
                    time_tag = item.find("span", class_="OSrXXb")
                    
                    title = title_tag.get_text(strip=True) if title_tag else ""
                    link = a_tag["href"] if a_tag else ""
                    source = source_tag.get_text(strip=True) if source_tag else ""
                    snippet = snippet_tag.get_text(strip=True) if snippet_tag else ""
                    pub_time = time_tag.get_text(strip=True) if time_tag else ""
                    
                    all_articles.append({
                        "æ¨™é¡Œ": title,
                        "ä¾†æº": source,
                        "æ™‚é–“": pub_time,
                        "æ‘˜è¦": snippet,
                        "é€£çµ": link,
                    })
                except Exception as e:
                    print(f"æå–å–®å‰‡æ–°èæ™‚ç™¼ç”ŸéŒ¯èª¤: {e}")
                    continue
                    
        except Exception as e:
            print(f"æŠ“å–ç¬¬ {page+1} é æ™‚ç™¼ç”ŸéŒ¯èª¤: {e}")
            continue
    
    # å¦‚æœæ²’æŠ“åˆ°ä»»ä½•è³‡æ–™ï¼Œæå‰è¿”å›éŒ¯èª¤
    if not all_articles:
        return f"âŒ æœªèƒ½æŠ“å–ä»»ä½•æ–°èï¼Œè«‹æª¢æŸ¥ç¶²è·¯é€£æ¥æˆ–å˜—è©¦å…¶ä»–é—œéµå­—", None
    
    # è¼¸å‡º Markdown
    try:
        with open(md_path, "w", encoding="utf-8") as f:
            f.write(f"# Google æ–°èæœå°‹çµæœï¼š{keyword}\n\n")
            for i, article in enumerate(all_articles, 1):
                f.write(f"{i}. **{article['æ¨™é¡Œ']}**\n")
                f.write(f"   - ğŸ“° ä¾†æºï¼š{article['ä¾†æº']}\n")
                if article['æ™‚é–“']:
                    f.write(f"   - ğŸ•’ æ™‚é–“ï¼š{article['æ™‚é–“']}\n")
                f.write(f"   - ğŸ“Œ æ‘˜è¦ï¼š{article['æ‘˜è¦']}\n")
                f.write(f"   - ğŸ”— [é–±è®€å…¨æ–‡]({article['é€£çµ']})\n\n")
    except Exception as e:
        print(f"å¯«å…¥ Markdown æª”æ¡ˆæ™‚ç™¼ç”ŸéŒ¯èª¤: {e}")
    
    # è¼¸å‡º CSV
    try:
        with open(csv_path, "w", newline="", encoding="utf-8-sig") as csvfile:
            writer = csv.DictWriter(
                csvfile, fieldnames=["æ¨™é¡Œ", "ä¾†æº", "æ™‚é–“", "æ‘˜è¦", "é€£çµ"]
            )
            writer.writeheader()
            writer.writerows(all_articles)
    except Exception as e:
        print(f"å¯«å…¥ CSV æª”æ¡ˆæ™‚ç™¼ç”ŸéŒ¯èª¤: {e}")
    
    # è£½ä½œæ–‡å­—é›²
    try:
        text_for_wc = " ".join([a["æ¨™é¡Œ"] + " " + a["æ‘˜è¦"] for a in all_articles])
        wordcloud_success = generate_wordcloud(text_for_wc, wordcloud_path)
    except Exception as e:
        print(f"è£½ä½œæ–‡å­—é›²æ™‚ç™¼ç”ŸéŒ¯èª¤: {e}")
        wordcloud_success = False
    
    # ç†±é–€ä¾†æºåˆ†æ
    top_sources = extract_top_sources(all_articles)
    
    # å›å‚³é¡¯ç¤ºç”¨å…§å®¹
    result_text = f"# âœ… å…±æ“·å– {len(all_articles)} å‰‡æ–°è\n"
    for i, article in enumerate(all_articles, 1):
        result_text += f"\n{i}. **{article['æ¨™é¡Œ']}**\n"
        result_text += f"   - ğŸ“° ä¾†æºï¼š{article['ä¾†æº']}\n"
        if article['æ™‚é–“']:
            result_text += f"   - ğŸ•’ æ™‚é–“ï¼š{article['æ™‚é–“']}\n"
        result_text += f"   - ğŸ“Œ æ‘˜è¦ï¼š{article['æ‘˜è¦']}\n"
        result_text += f"   - ğŸ”— {article['é€£çµ']}\n"
    
    result_text += "\n\nğŸ“Š ç†±é–€ä¾†æºï¼š\n"
    for src, count in top_sources:
        result_text += f"- {src}: {count} å‰‡\n"
    
    result_text += f"\nğŸ“ æª”æ¡ˆå„²å­˜ä½ç½®ï¼š\nğŸ“„ Markdownï¼š{md_path}\nğŸ“Š CSVï¼š{csv_path}"
    if wordcloud_success:
        result_text += f"\nğŸŒ¥ï¸ æ–‡å­—é›²ï¼š{wordcloud_path}"
    
    return result_text, str(wordcloud_path) if wordcloud_success else None


def run_gradio_interface():
    def search_news(keyword):
        try:
            # ä½¿ç”¨ requests ç‰ˆçš„çˆ¬èŸ²å‡½æ•¸
            return crawl_google_news_with_requests(keyword=keyword, pages=3)
        except Exception as e:
            error_message = f"âŒ ç™¼ç”ŸéŒ¯èª¤ï¼š\n{str(e)}\n\n{traceback.format_exc()}"
            print(error_message)  # åœ¨æ§åˆ¶å°é¡¯ç¤ºå®Œæ•´éŒ¯èª¤
            return error_message, None

    with gr.Blocks(title="Google æ–°èçˆ¬èŸ²ä»‹é¢") as demo:
        gr.Markdown(
            """# ğŸ“° Google æ–°èæœå°‹çˆ¬èŸ²\nè«‹è¼¸å…¥ä½ æƒ³æŸ¥è©¢çš„æ–°èä¸»é¡Œï¼ˆä¾‹å¦‚ï¼šChatGPTã€å°ç£ç§‘æŠ€ã€ç”Ÿæˆå¼AIï¼‰"""
        )
        keyword_input = gr.Textbox(
            label="æœå°‹é—œéµå­—", placeholder="å°ç£ Google æ–°è", value="å°ç£ Google æ–°è"
        )
        submit_btn = gr.Button("é–‹å§‹æœå°‹")
        output_text = gr.Textbox(
            label="åŸ·è¡Œçµæœ (å«æœå°‹çµæœèˆ‡æª”æ¡ˆè·¯å¾‘)", lines=30, show_copy_button=True
        )
        image_output = gr.Image(label="ğŸ” æ–‡å­—é›²åˆ†æ")

        submit_btn.click(
            fn=search_news, inputs=[keyword_input], outputs=[output_text, image_output]
        )

    # å•Ÿç”¨ä½‡åˆ—æ¨¡å¼ï¼Œæœ‰åŠ©æ–¼é˜²æ­¢å¤šæ¬¡é»æ“Šå°è‡´çš„ä¸¦ç™¼å•é¡Œ
    demo.queue()
    demo.launch(share=False)


if __name__ == "__main__":
    run_gradio_interface()</code></pre>
            </div>
            
            <div class="alert alert-success">
                <p><strong>ğŸ‘ æç¤º</strong></p>
                <p>ä½ å¯ä»¥å°‡ä¸Šè¿°ç¨‹å¼ç¢¼ä¿å­˜ç‚º <code>google_news_scraper.py</code>ï¼Œç„¶å¾Œé€šéå‘½ä»¤è¡Œé‹è¡Œå®ƒï¼š</p>
                <pre><code>python google_news_scraper.py</code></pre>
            </div>
        </section>

        <section id="tutorial">
            <h2>è©³ç´°æ•™å­¸</h2>
            
            <h3>1. ç¨‹å¼çµæ§‹å’Œå·¥ä½œåŸç†</h3>
            <p>é€™å€‹ç¨‹å¼ä¸»è¦åˆ†ç‚ºå¹¾å€‹éƒ¨åˆ†ï¼š</p>
            <ul>
                <li>çˆ¬èŸ²æ ¸å¿ƒåŠŸèƒ½ï¼ˆç²å–å’Œè§£æ Google æ–°èï¼‰</li>
                <li>æ–‡å­—é›²ç”Ÿæˆ</li>
                <li>çµæœä¿å­˜ï¼ˆMarkdown å’Œ CSVï¼‰</li>
                <li>Gradio åœ–å½¢ç•Œé¢</li>
            </ul>
            
            <h3>2. æ ¸å¿ƒçˆ¬èŸ²åŠŸèƒ½</h3>
            <p>æˆ‘å€‘ä½¿ç”¨ requests å’Œ BeautifulSoup ä¾†ç²å–å’Œè§£æ Google æ–°èå…§å®¹ã€‚</p>
            
            <div class="code-explanation">
                <div class="code-block">
<pre><code>def crawl_google_news_with_requests(keyword="å°ç£ Google æ–°è", pages=3):
    # ä¿å­˜æ‰€æœ‰æ–‡ç« 
    all_articles = []
    encoded_query = quote_plus(keyword)
    
    # è¨­å®š headers (æ¨¡æ“¬ç€è¦½å™¨)
    headers = {
        "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537